(function(){var e={"esri/views/layers/WMSLayerView":845,"esri/views/2d/layers/WMSLayerView2D":2151},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{2151:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(34),r(28),r(27),r(68),r(29),r(79),r(797),r(403),r(210),r(842),r(845)],void 0===(a=function(e,t,r,i,a,n,s,o,p,h,u,c,d){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new n,t.container=new h.BitmapContainer,t}return i(t,e),t.prototype.hitTest=function(e,t){return null},t.prototype.update=function(e){this.strategy.update(e),this.notifyChange("updating")},t.prototype.attach=function(){var e=this,t=this.layer,r=t.imageMaxHeight,i=t.imageMaxWidth;this.strategy=new c({container:this.container,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:r,imageMaxWidth:i,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this._exportWMSImageParameters=new p({layer:this.layer}),this._handles.add(this._exportWMSImageParameters.watch("version",function(t){e._exportImageVersion!==t&&(e._exportImageVersion=t,e._exportWMSImageParameters.layers?e.requestUpdate():e.container.removeAllChildren())}))},t.prototype.detach=function(){this.container.removeAllChildren(),this.strategy.destroy(),this._handles.removeAll(),this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null,this.container.removeAllChildren()},t.prototype.moveStart=function(){},t.prototype.viewChange=function(){},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.canResume=function(){var e=this.inherited(arguments);return e?this.layer.supportsSpatialReference(this.view.spatialReference):e},t.prototype.createFetchPopupFeaturesQuery=function(e){var t=this.container,r=this.view,i=e.x,a=e.y,n=r.spatialReference,s=null,p=0,h=0;t.children.some(function(e){var t=e.width,r=e.height,u=e.resolution,c=e.x,d=e.y,l=c+u*t,y=d-u*r;return i>=c&&i<=l&&a<=d&&a>=y&&(s=new o({xmin:c,ymin:y,xmax:l,ymax:d,spatialReference:n}),p=t,h=r,!0)});var u=s.width/p,c=Math.round((i-s.xmin)/u),d=Math.round((s.ymax-a)/u);return{extent:s,width:p,height:h,x:c,y:d}},t.prototype.doRefresh=function(){this.requestUpdate()},t.prototype.isUpdating=function(){return this.attached&&(this.strategy.updating||this.updateRequested)},t.prototype.fetchImage=function(e,t,i,a){var n=this;return a=r({timestamp:this.refreshTimestamp},a),this.layer.fetchImage(e,t,i,a).then(function(e){return n.notifyChange("updating"),e})},a([s.property({dependsOn:["view.spatialReference","layer.spatialReferences"]})],t.prototype,"suspended",void 0),a([s.subclass("esri.views.2d.layers.WMSLayerView2D")],t)}(s.declared(u,d))}.apply(null,i))||(e.exports=a)},845:function(e,t,r){var i,a;i=[r.dj.c(e.i),t,r(28),r(27),r(35),r(32),r(29),r(144)],void 0===(a=function(e,t,r,i,a,n,s,o){return function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.fetchPopupFeatures=function(e){var t=this.layer;if(!e)return n.reject(new a("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}));var r=t.popupEnabled;if(!r)return n.reject(new a("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:r}));var i=this.createFetchPopupFeaturesQuery(e),s=i.extent,o=i.width,p=i.height,h=i.x,u=i.y;if(!(s&&o&&p))return n.reject(new a("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:s,width:o,height:p}));var c=t.fetchFeatureInfo(s,o,p,h,u);return c?c.then(function(e){return[e]}):n.resolve([])},i([s.property()],t.prototype,"layer",void 0),i([s.subclass("esri.views.layers.WMSLayerView")],t)}(s.declared(o))}.apply(null,i))||(e.exports=a)}}]);