(function(){var e={"esri/views/3d/layers/support/layerViewUpdatingProperties":173,"esri/views/3d/layers/LayerView3D":179,"esri/layers/support/lazyLayerLoader":318,"esri/views/3d/terrain/terrainUtils":485,"esri/views/3d/layers/TiledLayerView3D":510,"esri/views/3d/terrain/terrainUtilsPlanar":511,"esri/views/3d/terrain/terrainUtilsSpherical":512,"esri/views/3d/layers/VectorTileLayerView3D":2128},t=this||window,n=t.webpackJsonp=t.webpackJsonp||[];n.registerAbsMids?n.registerAbsMids(e):(n.absMidsWaiting=n.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[64,37,38],{173:function(e,t,n){var i,r;i=[n.dj.c(e.i),t],void 0===(r=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,i))||(e.exports=r)},179:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(28),n(27),n(32),n(66),n(29),n(554),n(149)],void 0===(r=function(e,t,n,i,r,a,o,l,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return n(t,e),t.prototype.postscript=function(e){this.inherited(arguments),l.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return r.create(function(t,n){a.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var i=l.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);i?n(i):t()})})},i([o.property()],t.prototype,"view",void 0),i([o.property()],t.prototype,"slicePlaneEnabled",void 0),i([o.subclass("esri.views.3d.layers.LayerView3D")],t)}(o.declared(c))}.apply(null,i))||(e.exports=r)},2128:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(28),n(27),n(32),n(66),n(29),n(510),n(949),n(995),n(998)],void 0===(r=function(e,t,n,i,r,a,o,l,c,u,s){return function(e){function t(t){return e.call(this)||this}return n(t,e),t.prototype.initialize=function(){var e,t,n=this,i=this.layer.compatibleTileInfo256,o=this._getTileInfoSupportError(i,this.layer.fullExtent);o?this.addResolvingPromise(r.reject(o)):t=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var e,t=n.view.basemapTerrain.tilingScheme,i=t.pixelSize[0];n.schemaHelper=new c(i,n.view.spatialReference.isWGS84),e=256===i?n.layer.compatibleTileInfo256:n.view.spatialReference.isWGS84?n.layer.compatibleTileInfo512:n.layer.tileInfo;var r=n._getTileInfoCompatibilityError(e,t);if(r)throw r;n.tileInfo=e,n._updateMinMaxDataLevel()});var l=null;e=this._initializeTileHandler(),this.tileHandler=e[0],this.renderer=e[1],l=e[2],this.watch("layer.currentStyleInfo",function(){var e,t,i;l.isFulfilled()||l.cancel(),e=n._initializeTileHandler(),t=e[0],i=e[1],(l=e[2]).then(function(){var e=n.tileHandler;n.renderer=i,n.tileHandler=t,n.emit("data-changed"),e.destroy()})});var u=r.all([t,l]);this.addResolvingPromise(u)},t.prototype.destroy=function(){this.renderer=null,this.tileHandler.destroy(),this.tileHandler=null},t.prototype._initializeTileHandler=function(){var e=new u(this.layer,1,!1,null),t=new s,n=e.start();return n.then(function(){t.initialize(e.spriteMosaic,e.glyphMosaic,!1)}),[e,t,n]},i([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([o.property()],t.prototype,"layer",void 0),i([o.property()],t.prototype,"updatingPercentageValue",void 0),i([o.subclass("esri.views.3d.layers.VectorTileLayerView3D")],t)}(o.declared(l))}.apply(null,i))||(e.exports=r)},318:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(32)],void 0===(r=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[n(416)];e.apply(null,t)}.bind(this)).catch(n.oe)})},ElevationLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[n(287)];e.apply(null,t)}.bind(this)).catch(n.oe)})},FeatureLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[n(188)];e.apply(null,t)}.bind(this)).catch(n.oe)})},GroupLayer:function(){return i.create(function(e){return n.e(18).then(function(){var t=[n(320)];e.apply(null,t)}.bind(this)).catch(n.oe)})},GeoRSSLayer:function(){return i.create(function(e){return n.e(33).then(function(){var t=[n(443)];e.apply(null,t)}.bind(this)).catch(n.oe)})},ImageryLayer:function(){return i.create(function(e){return n.e(23).then(function(){var t=[n(439)];e.apply(null,t)}.bind(this)).catch(n.oe)})},KMLLayer:function(){return i.create(function(e){return n.e(29).then(function(){var t=[n(445)];e.apply(null,t)}.bind(this)).catch(n.oe)})},MapImageLayer:function(){return i.create(function(e){return n.e(25).then(function(){var t=[n(440)];e.apply(null,t)}.bind(this)).catch(n.oe)})},MapNotesLayer:function(){return i.create(function(e){return n.e(83).then(function(){var t=[n(492)];e.apply(null,t)}.bind(this)).catch(n.oe)})},OpenStreetMapLayer:function(){return i.create(function(e){return n.e(31).then(function(){var t=[n(446)];e.apply(null,t)}.bind(this)).catch(n.oe)})},PointCloudLayer:function(){return i.create(function(e){return n.e(21).then(function(){var t=[n(447)];e.apply(null,t)}.bind(this)).catch(n.oe)})},SceneLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[n(418)];e.apply(null,t)}.bind(this)).catch(n.oe)})},BuildingSceneLayer:function(){return i.create(function(e){return n.e(27).then(function(){var t=[n(442)];e.apply(null,t)}.bind(this)).catch(n.oe)})},IntegratedMeshLayer:function(){return i.create(function(e){return n.e(34).then(function(){var t=[n(444)];e.apply(null,t)}.bind(this)).catch(n.oe)})},StreamLayer:function(){return i.create(function(e){return n.e(35).then(function(){var t=[n(441)];e.apply(null,t)}.bind(this)).catch(n.oe)})},TileLayer:function(){return i.create(function(e){return n.e(5).then(function(){var t=[n(299)];e.apply(null,t)}.bind(this)).catch(n.oe)})},UnknownLayer:function(){return i.create(function(e){return n.e(84).then(function(){var t=[n(493)];e.apply(null,t)}.bind(this)).catch(n.oe)})},UnsupportedLayer:function(){return i.create(function(e){return n.e(85).then(function(){var t=[n(494)];e.apply(null,t)}.bind(this)).catch(n.oe)})},VectorTileLayer:function(){return i.create(function(e){return n.e(6).then(function(){var t=[n(319)];e.apply(null,t)}.bind(this)).catch(n.oe)})},WebTileLayer:function(){return i.create(function(e){return n.e(36).then(function(){var t=[n(321)];e.apply(null,t)}.bind(this)).catch(n.oe)})},WMSLayer:function(){return i.create(function(e){return n.e(28).then(function(){var t=[n(449)];e.apply(null,t)}.bind(this)).catch(n.oe)})},WMTSLayer:function(){return i.create(function(e){return n.e(65).then(function(){var t=[n(495)];e.apply(null,t)}.bind(this)).catch(n.oe)})},BingMapsLayer:function(){return i.create(function(e){return n.e(12).then(function(){var t=[n(348)];e.apply(null,t)}.bind(this)).catch(n.oe)})}}}.apply(null,i))||(e.exports=r)},485:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(287),n(299),n(319),n(548),n(511),n(512)],void 0===(r=function(e,t,n,i,r,a,o,l){function c(e){return e&&"esri.views.3d.layers.TileLayerView3D"===e.declaredClass}function u(e){return e&&"esri.views.3d.layers.VectorTileLayerView3D"===e.declaredClass}function s(e){return e&&"esri.views.3d.layers.WMTSLayerView3D"===e.declaredClass}function p(e){return e&&"esri.views.3d.layers.ElevationLayerView3D"===e.declaredClass}function f(){for(var e in y={},a)a[e].baseMapLayers.forEach(function(e){y[e.url]=19});y["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function h(e,t,n,i){return d["local"===i||"planar"===i?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var d={planar:o,spherical:l};t.weakAssert=function(e,t){e||console.warn("Terrain: "+t)},t.autoUpdateSkirtsVisibility=function(e,t,n){var i,r=d[e.manifold],a=r.isInsideExtent(e,t);if(a)i=e.getElevation(t);else{var o=e.getElevationBounds();i=.5*(o[0]+o[1])}var l=t[2]-i,c=.9*Math.abs(l)<n?0:l<0?-1:1;if(!a)if(r.isInsideExtent(e,t,e.hideSkirtsDistanceFromExtentMargin)){var u=r.tiltToExtentEdge(e,t);u>e.hideSkirtsMinimumCameraTilt&&u<e.hideSkirtsMaximumCameraTilt&&(c=0)}else c=0;e.skirtScale=c},t.isTiledLayer=function(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type},t.isVectorTileLayer=function(e){return e&&e.isInstanceOf(r)},t.isTileLayerView=c,t.isVectorTileLayerView=u,t.isWMTSLayerView=s,t.isElevationLayerView=p,t.isTiledLayerView=function(e){return e&&(c(e)||p(e)||u(e)||s(e))},t.useFetchTileForLayer=function(e){return e.fetchTile&&!(e.fetchTile===i.prototype.fetchTile||e.fetchTile===n.prototype.fetchTile)};var y=null;t.getKnownTiledServiceLevelCap=function(e){y||f();var t=e&&e.replace(/https?:/,"");return t in y?y[t]:1/0},t.prepareKnownTiledServiceLevelCaps=f,t.checkIfTileInfoSupportedForView=h,t.getTiledLayerInfo=function(e,t,n){var i,r;if("wmts"===e.type){var a=e.activeLayer;if(a){var o=a.tileMatrixSet;if(o)i=o.tileInfo,r=o.fullExtent;else{var l=a.tileMatrixSets;if(l){var c=l.find(function(e){return null==h(e.tileInfo,e.fullExtent,t,n)});if(c)return{tileInfo:c.tileInfo,fullExtent:c.fullExtent}}}}}else i="vector-tile"===e.type?e.compatibleTileInfo256:e.tileInfo,r=e.fullExtent;return i&&r&&null==h(i,r,t,n)?{tileInfo:i,fullExtent:r}:{tileInfo:null,fullExtent:null}}}.apply(null,i))||(e.exports=r)},510:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(28),n(27),n(35),n(29),n(179),n(173),n(485)],void 0===(r=function(e,t,n,i,r,a,o,l,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDataLevel=0,t.maxDataLevel=1/0,t._isUpdating=!1,t}return n(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,n){return this.layer.getTileUrl(e,t,n)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var n=c.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(n){var i={layer:this.layer,error:n},a=void 0;switch(n.name){case"tilingscheme:local-gcs-not-supported":a=new r("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",i);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":a=new r("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",i);break;default:a=new r("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",i)}return a}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new r("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype._updateMinMaxDataLevel=function(){var e,t=1/0,n=0;this.tileInfo.lods.forEach(function(e){t=Math.min(e.level,t),n=Math.max(e.level,n)}),e=[t,n],this.minDataLevel=e[0],this.maxDataLevel=e[1]},i([a.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),i([a.property(l.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([a.property(l.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),i([a.property()],t.prototype,"fullExtent",void 0),i([a.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),i([a.property()],t.prototype,"layer",void 0),i([a.property()],t.prototype,"minDataLevel",void 0),i([a.property()],t.prototype,"maxDataLevel",void 0),i([a.property()],t.prototype,"tileInfo",void 0),i([a.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(a.declared(o))}.apply(null,i))||(e.exports=r)},511:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(35),n(26),n(54),n(589),n(415)],void 0===(r=function(e,t,n,i,r,a,o){function l(e,t,n,r){i.vec3.copy(u,n),u[r]=t[r];var a,o=i.vec3.subtract(u,u,t),l=i.vec3.subtract(s,e,t),c=i.vec3.dot(l,o),p=i.vec3.dot(o,o);a=c<=0?t:p<=c?n:i.vec3.add(u,t,i.vec3.scale(o,o,c/p));var f=i.vec3.subtract(u,e,a);return Math.PI/2-Math.atan(f[2]/Math.sqrt(f[0]*f[0]+f[1]*f[1]))}function c(e,t){var i=e.lods,l=i[0].resolution*Math.pow(2,i[0].level),c=[l*e.size[0],l*e.size[1]],u=[e.origin.x,e.origin.y],s=r.fromExtent(t),p=r.create();o.computeRowColExtent(s,c,u,p);var f=(p[2]-p[0])*(p[3]-p[1]);if(f>a.MAX_ROOT_TILES){var h=i[0].scale*Math.pow(2,i[0].level),d=Math.max((s[3]-s[1])/e.size[1],(s[2]-s[0])/e.size[0])*h/l,y=Math.floor(Math.log(d)/Math.log(10));return d=Math.ceil(d/Math.pow(10,y))*Math.pow(10,y),new n("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(h).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+d.toLocaleString()+".",{level0Scale:h,suggestedLevel0Scale:d,requiredNumRootTiles:f,allowedNumRootTiles:a.MAX_ROOT_TILES})}return null}Object.defineProperty(t,"__esModule",{value:!0});var u=i.vec3f64.create(),s=i.vec3f64.create(),p=i.vec3f64.create(),f=i.vec3f64.create();t.isInsideExtent=function(e,t,n){void 0===n&&(n=0);var i=e.extent;if(0===n)return r.containsPoint(i,t);var a=Math.min(i[2]-i[0],i[3]-i[1]);return r.containsPointWithMargin(i,t,n*a)},t.tiltOnEdge=l,t.tiltToExtentEdge=function(e,t){var n=e.getElevationBounds(),i=e.extent,r=.5*(n[0]+n[1]);p[0]=i[0],p[1]=i[1],p[2]=r,f[0]=i[2],f[1]=i[3],f[2]=r;var a=1/0,o=1/0;return t[0]<p[0]?a=l(t,p,f,0):t[0]>f[0]&&(a=l(t,f,p,0)),t[1]<p[1]?o=l(t,p,f,1):t[1]>f[1]&&(o=l(t,f,p,1)),Math.min(a,o)},t.checkIfTileInfoSupportedForViewSR=function(e,t,i){if(e.spatialReference.isGeographic)return new n("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var r=o.checkUnsupported(e);return r||c(e,t)||(i&&!e.spatialReference.equals(i)?new n("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}}.apply(null,i))||(e.exports=r)},512:function(e,t,n){var i,r;i=[n.dj.c(e.i),t,n(35),n(415)],void 0===(r=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isInsideExtent=function(e,t,n){return void 0===n&&(n=0),!0},t.tiltToExtentEdge=function(e,t){return 0},t.checkIfTileInfoSupportedForViewSR=function(e,t,r){var a=e.lods.length-1;if(e.spatialReference.isWebMercator){if(!i.makeWebMercatorAuxiliarySphere(a).compatibleWith(e))return new n("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!e.spatialReference.isWGS84)return new n("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!i.makeWGS84WithTileSize(e.size[1],a).compatibleWith(e))return new n("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}if(r&&!e.spatialReference.equals(r))return new n("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}.apply(null,i))||(e.exports=r)}}]);