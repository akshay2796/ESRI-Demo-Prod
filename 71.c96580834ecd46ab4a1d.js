(function(){var e={"esri/layers/support/lazyLayerLoader":318,"esri/layers/GroupLayer":320,"esri/portal/support/jsonContext":783,"esri/portal/support/layersLoader":1957},t=this||window,r=t.webpackJsonp=t.webpackJsonp||[];r.registerAbsMids?r.registerAbsMids(e):(r.absMidsWaiting=r.absMidsWaiting||[]).push(e)})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[71,18,37,38],{1957:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(59),r(35),r(32),r(320),r(318),r(277),r(783),r(686)],void 0===(i=function(e,t,r,n,i,a,o,u,l,c){function s(e,t){var r,i,a=e.portalItem.type;switch(a){case"Feature Service":r=o.layerLookupMap.FeatureLayer;break;case"Stream Service":r=o.layerLookupMap.StreamLayer;break;case"Scene Service":r=o.layerLookupMap.SceneLayer;break;case"Feature Collection":r=o.layerLookupMap.FeatureLayer;break;default:throw new n("portal:unsupported-item-type-as-group","The item type '"+a+"' is not supported as a 'GroupLayer'")}return r().then(function(e){return i=e,f(t)}).then(function(r){return r&&Array.isArray(r.layers)?y(e,i,r,t):p(e,i,t)})}function p(e,t,n){if(!e.portalItem.url)return i.resolve();return r(e.portalItem.url,{responseType:"json",query:{f:"json"}}).then(function(r){var i=r.data;if(i&&Array.isArray(i.layers)){var a=i.layers.map(function(e){return{id:e.id,name:e.name}});return y(e,t,{layers:a},n)}})}function y(e,t,r,n){var i=r.showLegend,a=r.layers.slice();a.reverse(),a.forEach(function(r){var n=new t({portalItem:e.portalItem,layerId:r.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){var a={origin:"portal-item",portal:e.portalItem.portal||u.getDefault()};n.read(r,a),null!=i&&n.read({showLegend:i},a)}e.add(n)})}function f(e){if(!1===e.supportsData)return i.resolve();var t=e.instance;return t.portalItem.fetchData().catch(function(){return null}).then(function(e){var r,n=e;if(function(e){return"stream"!==e.type&&"layerId"in e}(t)){var i=!0;if(e&&Array.isArray(n.layers)){null==t.layerId&&(t.layerId=n.layers[0].id);for(var a=0;a<n.layers.length;a++)if(n.layers[a].id===t.layerId){r=n.layers[a];break}r&&(1===n.layers.length&&(i=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))}return i&&"service-name"!==t.sublayerTitleMode&&(t.sublayerTitleMode="item-title-and-service-name"),r}return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e){var t=e.instance.portalItem;return t&&t.id?t.load().then(function(){return function(e){var t=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(t.type))throw new n("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:t.type,expectedType:e.supportedTypes.join(", ")})}(e)}).then(function(){return function(e){var t=e.instance,r=t.portalItem,n=r.url,i=r.title,o=l.createForItem(r);return t.isInstanceOf(a)?(t.read({title:i},o),s(t,e)):(n&&t.read({url:n},o),f(e).then(function(e){return e&&t.read(e,o),t.read({title:i},o),c.loadStyleRenderer(t,o)}))}(e)}):i.resolve()}}.apply(null,n))||(e.exports=i)},318:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(32)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return n.create(function(e){return Promise.resolve().then(function(){var t=[r(416)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ElevationLayer:function(){return n.create(function(e){return Promise.resolve().then(function(){var t=[r(287)];e.apply(null,t)}.bind(this)).catch(r.oe)})},FeatureLayer:function(){return n.create(function(e){return Promise.resolve().then(function(){var t=[r(188)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GroupLayer:function(){return n.create(function(e){return r.e(18).then(function(){var t=[r(320)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GeoRSSLayer:function(){return n.create(function(e){return r.e(33).then(function(){var t=[r(443)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ImageryLayer:function(){return n.create(function(e){return r.e(23).then(function(){var t=[r(439)];e.apply(null,t)}.bind(this)).catch(r.oe)})},KMLLayer:function(){return n.create(function(e){return r.e(29).then(function(){var t=[r(445)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapImageLayer:function(){return n.create(function(e){return r.e(25).then(function(){var t=[r(440)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapNotesLayer:function(){return n.create(function(e){return r.e(83).then(function(){var t=[r(492)];e.apply(null,t)}.bind(this)).catch(r.oe)})},OpenStreetMapLayer:function(){return n.create(function(e){return r.e(31).then(function(){var t=[r(446)];e.apply(null,t)}.bind(this)).catch(r.oe)})},PointCloudLayer:function(){return n.create(function(e){return r.e(21).then(function(){var t=[r(447)];e.apply(null,t)}.bind(this)).catch(r.oe)})},SceneLayer:function(){return n.create(function(e){return Promise.resolve().then(function(){var t=[r(418)];e.apply(null,t)}.bind(this)).catch(r.oe)})},BuildingSceneLayer:function(){return n.create(function(e){return r.e(27).then(function(){var t=[r(442)];e.apply(null,t)}.bind(this)).catch(r.oe)})},IntegratedMeshLayer:function(){return n.create(function(e){return r.e(34).then(function(){var t=[r(444)];e.apply(null,t)}.bind(this)).catch(r.oe)})},StreamLayer:function(){return n.create(function(e){return r.e(35).then(function(){var t=[r(441)];e.apply(null,t)}.bind(this)).catch(r.oe)})},TileLayer:function(){return n.create(function(e){return r.e(5).then(function(){var t=[r(299)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnknownLayer:function(){return n.create(function(e){return r.e(84).then(function(){var t=[r(493)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnsupportedLayer:function(){return n.create(function(e){return r.e(85).then(function(){var t=[r(494)];e.apply(null,t)}.bind(this)).catch(r.oe)})},VectorTileLayer:function(){return n.create(function(e){return r.e(6).then(function(){var t=[r(319)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WebTileLayer:function(){return n.create(function(e){return r.e(36).then(function(){var t=[r(321)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMSLayer:function(){return n.create(function(e){return r.e(28).then(function(){var t=[r(449)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMTSLayer:function(){return n.create(function(e){return r.e(65).then(function(){var t=[r(495)];e.apply(null,t)}.bind(this)).catch(r.oe)})},BingMapsLayer:function(){return n.create(function(e){return r.e(12).then(function(){var t=[r(348)];e.apply(null,t)}.bind(this)).catch(r.oe)})}}}.apply(null,n))||(e.exports=i)},320:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(28),r(27),r(158),r(577),r(294),r(32),r(29),r(285),r(128),r(201),r(187),r(735)],void 0===(i=function(e,t,n,i,a,o,u,l,c,s,p,y,f,h){return function(e){function t(t){var r=e.call(this)||this;return r._visibilityHandles={},r.fullExtent=void 0,r.operationalLayerType="GroupLayer",r.spatialReference=void 0,r.type="group",r._visibilityWatcher=r._visibilityWatcher.bind(r),r}return n(t,e),t.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)},t.prototype._writeLayers=function(e,t,r,n){var i=[];if(!e)return i;e.forEach(function(e){if(e.write){var t=e.write(null,n);t&&t.layerType&&i.push(t)}}),t.layers=i},Object.defineProperty(t.prototype,"visibilityMode",{set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)},enumerable:!0,configurable:!0}),t.prototype.load=function(){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]})),this.when()},t.prototype.loadAll=function(){var e=this;return a.safeCast(o.loadAll(this,function(t){t(e.layers)}))},t.prototype.layerAdded=function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)},t.prototype.layerRemoved=function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":case"3d":return l.create(function(e){r.e(73).then(function(){var t=[r(1001)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._turnOffOtherLayers=function(e){this.layers.forEach(function(t){t!==e&&(t.visible=!1)})},t.prototype._enforceVisibility=function(e,t){if(s.getProperties(this).initialized){var r=this.layers,n=r.find(function(e){return e.visible});switch(e){case"exclusive":r.length&&!n&&((n=r.getItemAt(0)).visible=!0),this._turnOffOtherLayers(n);break;case"inherited":r.forEach(function(e){e.visible=t})}}},t.prototype._visibleWatcher=function(e){"inherited"===this.visibilityMode&&this.layers.forEach(function(t){t.visible=e})},t.prototype._visibilityWatcher=function(e,t,r,n){var i=n;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(i):this._isAnyLayerVisible()||(i.visible=!0);break;case"inherited":i.visible=this.visible}},t.prototype._isAnyLayerVisible=function(){return this.layers.some(function(e){return e.visible})},i([c.property()],t.prototype,"fullExtent",void 0),i([c.property({json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"layers",void 0),i([c.writer("layers")],t.prototype,"_writeLayers",null),i([c.property({type:["GroupLayer"]})],t.prototype,"operationalLayerType",void 0),i([c.property({json:{write:!1}})],t.prototype,"portalItem",void 0),i([c.property()],t.prototype,"spatialReference",void 0),i([c.property({json:{read:!1},readOnly:!0,value:"group"})],t.prototype,"type",void 0),i([c.property({type:String,value:"independent",json:{write:!0}})],t.prototype,"visibilityMode",null),i([c.subclass("esri.layers.GroupLayer")],t)}(c.declared(p,h,u,y,f))}.apply(null,n))||(e.exports=i)},783:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(69),r(277)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createForItem=function(e){return{origin:"portal-item",url:r.urlToObject(e.itemUrl),portal:e.portal||n.getDefault()}}}.apply(null,n))||(e.exports=i)}}]);